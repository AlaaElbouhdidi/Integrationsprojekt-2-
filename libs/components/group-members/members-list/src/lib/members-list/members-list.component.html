<section class="members">
    <div class="members-header">
        <div class="members-header-searchbar">
            <fa-icon icon="search"></fa-icon>
            <input type="text" name="term" [(ngModel)]="term" placeholder="Search..." autofocus >
        </div>
        <button *ngIf="gAdmin === currentUser.uid" (click)="openModal(newMember)">+ Add new member</button>
    </div>
    <div class="members-body">
        <p *ngIf="term.length === 0">{{membersList.length}} members found</p>
        <div class="members-body-item" *ngFor="let i of membersList | filter:term ">
            <mate-team-members-list-item
                [me]="currentUser"
                [gAdmin]="gAdmin"
                [member]="i"
                (oDeleteMember)="deleteMember(i, deleteConfirmationModal)"
                (oToggleIsAdmin)="toggleIsAdmin(i)"
            ></mate-team-members-list-item>
        </div>
    </div>
</section>

<ng-template #newMember>
    <div class="modal-header">
        <h5>
            <fa-icon icon="user-plus"></fa-icon>
            Add new member
        </h5>
        <fa-icon icon="times-circle" (click)="closeModal()"> </fa-icon>
    </div>
    <div class="modal-body">
        <mate-team-invite-members
            (sendInvitesEvent)="addMember($event)"
            [gid]="gid"
        >
        </mate-team-invite-members>
    </div>
</ng-template>

<ng-template #deleteConfirmationModal>
    <mate-team-confirmation-modal
        (closeModalEvent)="closeConfirmationModal($event)"
        (dismissModalEvent)="dismissConfirmationModal()"
        [title]="'DELETE MEMBER'"
        [text]="'Are you sure you want to delete this member?'"
    >
    </mate-team-confirmation-modal>
</ng-template>
